<!DOCTYPE html>
<html>
<head>
    <title>Teste FormData</title>
</head>
<body>
    <h2>Teste FormData - Upload Edição</h2>
    
    <form id="testForm" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="_token" value="test-token">
        <input type="hidden" name="_method" value="PUT">
        
        <label>Título:</label><br>
        <input type="text" name="title" value="Teste Debug" required><br><br>
        
        <label>Imagens:</label><br>
        <input type="file" id="images" name="images[]" multiple accept="image/*"><br><br>
        
        <button type="button" onclick="testFormData()">Testar FormData</button>
        <button type="button" onclick="testManualFormData()">Testar FormData Manual</button>
    </form>
    
    <div id="results"></div>
    
    <script>
        function testFormData() {
            const form = document.getElementById('testForm');
            const formData = new FormData(form);
            
            console.log('=== TESTE FORMDATA AUTOMÁTICO ===');
            
            // Verificar todos os campos
            for (let [key, value] of formData.entries()) {
                console.log(key + ':', value);
                if (value instanceof File) {
                    console.log('  - File name:', value.name);
                    console.log('  - File size:', value.size);
                    console.log('  - File type:', value.type);
                }
            }
            
            document.getElementById('results').innerHTML += '<h3>FormData Automático - Ver Console</h3>';
        }
        
        function testManualFormData() {
            const formData = new FormData();
            const imagesInput = document.getElementById('images');
            
            console.log('=== TESTE FORMDATA MANUAL ===');
            
            // Adicionar campos manualmente
            formData.append('_token', 'test-token');
            formData.append('_method', 'PUT');
            formData.append('title', 'Teste Manual');
            
            // Adicionar imagens manualmente
            for (let i = 0; i < imagesInput.files.length; i++) {
                const file = imagesInput.files[i];
                formData.append('images[]', file);
                console.log(`Adicionando imagem ${i}:`, file.name);
            }
            
            // Verificar todos os campos
            console.log('Campos no FormData manual:');
            for (let [key, value] of formData.entries()) {
                console.log(key + ':', value);
                if (value instanceof File) {
                    console.log('  - File name:', value.name);
                    console.log('  - File size:', value.size);
                    console.log('  - File type:', value.type);
                }
            }
            
            document.getElementById('results').innerHTML += '<h3>FormData Manual - Ver Console</h3>';
        }
        
        // Listener para mudanças no input de arquivos
        document.getElementById('images').addEventListener('change', function(e) {
            console.log('Files selected:', e.target.files.length);
            for (let i = 0; i < e.target.files.length; i++) {
                console.log(`File ${i}:`, e.target.files[i].name);
            }
        });
    </script>
</body>
</html>