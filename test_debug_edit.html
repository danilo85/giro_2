<!DOCTYPE html>
<html>
<head>
    <title>Debug Upload Edição</title>
    <script>
        function debugForm() {
            const form = document.getElementById('testForm');
            const formData = new FormData(form);
            
            console.log('=== DEBUG FORM ===');
            console.log('Form method:', form.method);
            console.log('Form enctype:', form.enctype);
            
            // Verificar todos os campos
            for (let [key, value] of formData.entries()) {
                console.log(key + ':', value);
                if (value instanceof File) {
                    console.log('  - File name:', value.name);
                    console.log('  - File size:', value.size);
                    console.log('  - File type:', value.type);
                }
            }
            
            // Verificar especificamente o campo images
            const imagesInput = document.getElementById('images');
            console.log('Images input files:', imagesInput.files.length);
            for (let i = 0; i < imagesInput.files.length; i++) {
                const file = imagesInput.files[i];
                console.log(`Image ${i}:`, file.name, file.size, file.type);
            }
            
            return false; // Impedir envio real
        }
    </script>
</head>
<body>
    <h2>Teste Debug - Upload Edição</h2>
    
    <form id="testForm" method="POST" action="http://localhost:8000/portfolio/works/1" enctype="multipart/form-data" onsubmit="return debugForm()">
        <input type="hidden" name="_token" value="{{ csrf_token() }}">
        <input type="hidden" name="_method" value="PUT">
        
        <label>Título:</label><br>
        <input type="text" name="title" value="Teste Debug" required><br><br>
        
        <label>Categoria:</label><br>
        <select name="portfolio_category_id" required>
            <option value="1">Categoria 1</option>
        </select><br><br>
        
        <label>Status:</label><br>
        <select name="status" required>
            <option value="draft">Rascunho</option>
            <option value="published">Publicado</option>
        </select><br><br>
        
        <label>Imagens:</label><br>
        <input type="file" id="images" name="images[]" multiple accept="image/*"><br><br>
        
        <button type="submit">Debug Form</button>
    </form>
    
    <script>
        // Adicionar listener para mudanças no input de arquivos
        document.getElementById('images').addEventListener('change', function(e) {
            console.log('Files selected:', e.target.files.length);
            for (let i = 0; i < e.target.files.length; i++) {
                console.log(`File ${i}:`, e.target.files[i].name);
            }
        });
    </script>
</body>
</html>